---
const routes = [
  { path: "#home", id: "home", text: "Home" },
  { path: "#projects", id: "projects", text: "Projects" },
  { path: "#about", id: "about", text: "About" },
  { path: "#experience", id: "experience", text: "Experience" },
];
---

<header
  class="fixed bottom-0 lg:bottom-auto lg:top-0 w-full backdrop-blur-md bg-opacity-50 z-40"
>
  <div class="px-5 py-4 lg:py-6 max-w-6xl mx-auto flex items-center">
    <h2 class="text-2xl hidden lg:block">
      <span class="font-light">MA</span><span class="text-indigo-500 font-bold"
        >Rodr√≠guez
      </span>
    </h2>
    <nav class="w-fit mx-auto lg:mx-0 lg:ml-auto">
      <ul class="flex items-center gap-8">
        {routes.map((route) => {
          const { path, id, text } = route

          return (
            <li class="font-light lg:text-xl hover:text-indigo-500">
              <a href={path} data-name={id} class="pb-2">
                {text}
              </a>
            </li>
          )
        })}
        <a role="button"
            role="button"
            href="https://es.linkedin.com/in/miguel-%C3%A1ngel-rodr%C3%ADguez-hernando-a20b27196"
            target="_blank"
            class="px-5 py-0.5 items-center w-fit space-x-1.5 group secondary-btn hidden lg:flex">
              <span class="font-thin text-base">Hire</span>
              <svg class="fill-white group-hover:fill-indigo-500 h-4 w-auto" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </a>
      </ul>
    </nav>
  </div>
</header>

<script lang="js">
  const routes = document.querySelectorAll("header li > a");
  const { hash } = window.location;

  function updateNavigationStyle(event) {
    routes.forEach((route) => {
      route
        .getAttribute("href")
        .includes(
          !event?.target ? hash || null : `#${event.target.getAttribute("data-name")}`
        )
        ? route.classList.add(
            "border-b-2",
            "border-black",
            "hover:border-indigo-500"
          )
        : route.classList.remove(
            "border-b-2",
            "border-black",
            "hover:border-indigo-500"
          );
    });
  }

  function scrollTo(e) {
    e.preventDefault();

    const href = e.target.getAttribute('href');

    if (!href) return;
  
    const { offsetTop } = document.querySelector(href);

    if (offsetTop == null) return;
  
    scroll({
      top: offsetTop,
      behavior: 'smooth',
    });
  }
  
  updateNavigationStyle(hash);

  routes.forEach((route) => {
    route.addEventListener("click", updateNavigationStyle);
    route.addEventListener("click", scrollTo);
  });
</script>
